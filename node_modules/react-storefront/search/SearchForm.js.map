{"version":3,"sources":["../../src/search/SearchForm.js"],"names":["styles","theme","root","position","height","display","flexDirection","useStyles","name","SearchForm","classes","children","action","autoComplete","ref","router","handleSubmit","e","preventDefault","data","FormData","current","query","entries","value","url","includes","qs","stringify","push","split","propTypes","PropTypes","object","node","string","bool","defaultProps"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;;;;;;;AAEO,IAAMA,MAAM,GAAG,SAATA,MAAS,CAAAC,KAAK;AAAA,SAAK;AAC9B;;;AAGAC,IAAAA,IAAI,EAAE;AACJC,MAAAA,QAAQ,EAAE,UADN;AAEJC,MAAAA,MAAM,EAAE,MAFJ;AAGJC,MAAAA,OAAO,EAAE,MAHL;AAIJC,MAAAA,aAAa,EAAE;AAJX;AAJwB,GAAL;AAAA,CAApB;;;AAWP,IAAMC,SAAS,GAAG,4BAAWP,MAAX,EAAmB;AAAEQ,EAAAA,IAAI,EAAE;AAAR,CAAnB,CAAlB;AAEA;;;;AAGe,SAASC,UAAT,OAAiE;AAAA,MAA3CC,OAA2C,QAA3CA,OAA2C;AAAA,MAAlCC,QAAkC,QAAlCA,QAAkC;AAAA,MAAxBC,MAAwB,QAAxBA,MAAwB;AAAA,MAAhBC,YAAgB,QAAhBA,YAAgB;AAC9EH,EAAAA,OAAO,GAAGH,SAAS,CAAC;AAAEG,IAAAA,OAAO,EAAPA;AAAF,GAAD,CAAnB;AAEA,MAAMI,GAAG,GAAG,oBAAZ;AACA,MAAMC,MAAM,GAAG,wBAAf;;AAEA,MAAMC,YAAY;AAAA,8FAAG,iBAAMC,CAAN;AAAA;;AAAA;AAAA;AAAA;AAAA;AACnBA,cAAAA,CAAC,CAACC,cAAF;AAEMC,cAAAA,IAHa,GAGN,IAAIC,QAAJ,CAAaN,GAAG,CAACO,OAAjB,CAHM;AAIbC,cAAAA,KAJa,GAIL,EAJK;AAAA,qDAMOH,IAAI,CAACI,OAAL,EANP;;AAAA;AAMnB,oEAA0C;AAAA,iFAAhCf,IAAgC,mBAA1BgB,KAA0B;AACxCF,kBAAAA,KAAK,CAACd,IAAD,CAAL,GAAcgB,KAAd;AACD;AARkB;AAAA;AAAA;AAAA;AAAA;;AAUbC,cAAAA,GAVa,aAUJb,MAVI,SAUKA,MAAM,CAACc,QAAP,CAAgB,GAAhB,IAAuB,GAAvB,GAA6B,GAVlC,SAUwCC,eAAGC,SAAH,CAAaN,KAAb,CAVxC;AAWnBP,cAAAA,MAAM,CAACc,IAAP,CAAYjB,MAAM,CAACkB,KAAP,CAAa,IAAb,EAAmB,CAAnB,CAAZ,EAAmCL,GAAnC;AAXmB,+CAYZ,KAZY;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAZT,YAAY;AAAA;AAAA;AAAA,KAAlB;;AAeA,sBACE;AACE,IAAA,GAAG,EAAEF,GADP;AAEE,IAAA,MAAM,EAAEF,MAFV;AAGE,IAAA,QAAQ,EAAEI,YAHZ;AAIE,IAAA,SAAS,EAAEN,OAAO,CAACR,IAJrB;AAKE,IAAA,MAAM,EAAC,MALT;AAME,IAAA,YAAY,EAAEW,YAAY,GAAG,IAAH,GAAU;AANtC,KAQGF,QARH,CADF;AAYD;;AAEDF,UAAU,CAACsB,SAAX,GAAuB;AACrB;;;AAGArB,EAAAA,OAAO,EAAEsB,sBAAUC,MAJE;;AAMrB;;;AAGAtB,EAAAA,QAAQ,EAAEqB,sBAAUE,IATC;;AAWrB;;;AAGAtB,EAAAA,MAAM,EAAEoB,sBAAUG,MAdG;;AAgBrB;;;AAGAtB,EAAAA,YAAY,EAAEmB,sBAAUI;AAnBH,CAAvB;AAsBA3B,UAAU,CAAC4B,YAAX,GAA0B;AACxBzB,EAAAA,MAAM,EAAE,SADgB;AAExBC,EAAAA,YAAY,EAAE;AAFU,CAA1B","sourcesContent":["import PropTypes from 'prop-types'\nimport React, { useRef } from 'react'\nimport makeStyles from '@material-ui/core/styles/makeStyles'\nimport { useRouter } from 'next/router'\nimport qs from 'qs'\n\nexport const styles = theme => ({\n  /**\n   * Styles applied to the root element.\n   */\n  root: {\n    position: 'relative',\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n  },\n})\nconst useStyles = makeStyles(styles, { name: 'RSFSearchForm' })\n\n/**\n * A form used to submit a search query.\n */\nexport default function SearchForm({ classes, children, action, autoComplete }) {\n  classes = useStyles({ classes })\n\n  const ref = useRef()\n  const router = useRouter()\n\n  const handleSubmit = async e => {\n    e.preventDefault()\n\n    const data = new FormData(ref.current)\n    const query = {}\n\n    for (let [name, value] of data.entries()) {\n      query[name] = value\n    }\n\n    const url = `${action}${action.includes('?') ? '&' : '?'}${qs.stringify(query)}`\n    router.push(action.split(/\\?/)[0], url)\n    return false\n  }\n\n  return (\n    <form\n      ref={ref}\n      action={action}\n      onSubmit={handleSubmit}\n      className={classes.root}\n      target=\"_top\"\n      autoComplete={autoComplete ? 'on' : 'off'}\n    >\n      {children}\n    </form>\n  )\n}\n\nSearchForm.propTypes = {\n  /**\n   * Override or extend the styles applied to the component. See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object,\n\n  /**\n   * Children to be rendered inside the form.\n   */\n  children: PropTypes.node,\n\n  /**\n   * An `action` attribute to use for the `<form>` element.\n   */\n  action: PropTypes.string,\n\n  /**\n   * Form auto complete\n   */\n  autoComplete: PropTypes.bool,\n}\n\nSearchForm.defaultProps = {\n  action: '/search',\n  autoComplete: false,\n}\n"],"file":"SearchForm.js"}